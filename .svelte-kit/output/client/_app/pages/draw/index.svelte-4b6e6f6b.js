import{S as t,i as e,s,G as r,e as a,j as n,k as $,c as o,a as c,m as l,d as f,n as i,b as m,f as g,E as p,o as d,v as u,r as h,w,M as x,z as y,R as v,N as b,L as k,O as S,H as j,I as A,P as E,Q as B,t as I,g as P}from"../../chunks/vendor-4d3c3715.js";/* empty css                       */import D from"./Toolbar/DrawButtons.svelte-4443bcaa.js";import M from"./Toolbar/EditButtons.svelte-12bc6afd.js";import T from"./Toolbar/ProgressButtons.svelte-9adb16ae.js";import L from"./Toolbar/InfoBox.svelte-c6892651.js";import R from"./AreaMap.svelte-77568f84.js";import{r as H,m as N,a as U,b as z,s as G,c as O}from"../../chunks/mapstore-75392c4b.js";function Q(t){let e,s;return{c(){e=a("img"),this.h()},l(t){e=o(t,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){A(e,"margin-left","10px"),A(e,"margin-top","4px"),m(e,"class","logo svelte-1c2scpc"),e.src!==(s="https://cdn.ons.gov.uk/assets/images/ons-logo/v2/ons-logo.svg")&&m(e,"src","https://cdn.ons.gov.uk/assets/images/ons-logo/v2/ons-logo.svg"),m(e,"alt","Office for National Statistics logo - Homepage")},m(t,s){g(t,e,s)},d(t){t&&f(e)}}}function V(t){let e;return{c(){e=I("Draw Area")},l(t){e=P(t,"Draw Area")},m(t,s){g(t,e,s)},d(t){t&&f(e)}}}function _(t){let e;return{c(){e=I("Save + Load Area")},l(t){e=P(t,"Save + Load Area")},m(t,s){g(t,e,s)},d(t){t&&f(e)}}}function q(t){let e;return{c(){e=I("Build Profile")},l(t){e=P(t,"Build Profile")},m(t,s){g(t,e,s)},d(t){t&&f(e)}}}function C(t){let e,s,r,a,o,c;return e=new B({props:{href:"/draw",$$slots:{default:[V]},$$scope:{ctx:t}}}),r=new B({props:{href:"/",$$slots:{default:[_]},$$scope:{ctx:t}}}),o=new B({props:{href:"/",$$slots:{default:[q]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment),s=$(),n(r.$$.fragment),a=$(),n(o.$$.fragment)},l(t){l(e.$$.fragment,t),s=i(t),l(r.$$.fragment,t),a=i(t),l(o.$$.fragment,t)},m(t,n){d(e,t,n),g(t,s,n),d(r,t,n),g(t,a,n),d(o,t,n),c=!0},p(t,s){const a={};4096&s&&(a.$$scope={dirty:s,ctx:t}),e.$set(a);const n={};4096&s&&(n.$$scope={dirty:s,ctx:t}),r.$set(n);const $={};4096&s&&($.$$scope={dirty:s,ctx:t}),o.$set($)},i(t){c||(u(e.$$.fragment,t),u(r.$$.fragment,t),u(o.$$.fragment,t),c=!0)},o(t){h(e.$$.fragment,t),h(r.$$.fragment,t),h(o.$$.fragment,t),c=!1},d(t){w(e,t),t&&f(s),w(r,t),t&&f(a),w(o,t)}}}function F(t){let e,s;return e=new E({props:{$$slots:{default:[C]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){l(e.$$.fragment,t)},m(t,r){d(e,t,r),s=!0},p(t,s){const r={};4096&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){s||(u(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){w(e,t)}}}function J(t){let e,s,r,a;return e=new j({props:{$$slots:{default:[Q]},$$scope:{ctx:t}}}),r=new j({props:{style:"float:right;margin-right:2px",$$slots:{default:[F]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment),s=$(),n(r.$$.fragment)},l(t){l(e.$$.fragment,t),s=i(t),l(r.$$.fragment,t)},m(t,n){d(e,t,n),g(t,s,n),d(r,t,n),a=!0},p(t,s){const a={};4096&s&&(a.$$scope={dirty:s,ctx:t}),e.$set(a);const n={};4096&s&&(n.$$scope={dirty:s,ctx:t}),r.$set(n)},i(t){a||(u(e.$$.fragment,t),u(r.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),h(r.$$.fragment,t),a=!1},d(t){w(e,t),t&&f(s),w(r,t)}}}function K(t){let e,s,r;return e=new D({}),{c(){n(e.$$.fragment),s=$()},l(t){l(e.$$.fragment,t),s=i(t)},m(t,a){d(e,t,a),g(t,s,a),r=!0},i(t){r||(u(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){w(e,t),t&&f(s)}}}function W(t){let e,s,r;return e=new M({}),{c(){n(e.$$.fragment),s=$()},l(t){l(e.$$.fragment,t),s=i(t)},m(t,a){d(e,t,a),g(t,s,a),r=!0},i(t){r||(u(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){w(e,t),t&&f(s)}}}function X(t){let e,s;return e=new T({}),{c(){n(e.$$.fragment)},l(t){l(e.$$.fragment,t)},m(t,r){d(e,t,r),s=!0},i(t){s||(u(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){w(e,t)}}}function Y(t){let e,s,r,a;return e=new j({props:{$$slots:{default:[K]},$$scope:{ctx:t}}}),s=new j({props:{$$slots:{default:[W]},$$scope:{ctx:t}}}),r=new j({props:{$$slots:{default:[X]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment),n(s.$$.fragment),n(r.$$.fragment)},l(t){l(e.$$.fragment,t),l(s.$$.fragment,t),l(r.$$.fragment,t)},m(t,n){d(e,t,n),d(s,t,n),d(r,t,n),a=!0},p(t,a){const n={};4096&a&&(n.$$scope={dirty:a,ctx:t}),e.$set(n);const $={};4096&a&&($.$$scope={dirty:a,ctx:t}),s.$set($);const o={};4096&a&&(o.$$scope={dirty:a,ctx:t}),r.$set(o)},i(t){a||(u(e.$$.fragment,t),u(s.$$.fragment,t),u(r.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),h(s.$$.fragment,t),h(r.$$.fragment,t),a=!1},d(t){w(e,t),w(s,t),w(r,t)}}}function Z(t){let e,s,r,a,o,c;return e=new v({props:{id:"head1",$$slots:{default:[J]},$$scope:{ctx:t}}}),r=new v({props:{style:"background-color:#13518d;height:calc(.085*var(--header-1-height));margin-bottom:0px;"}}),o=new v({props:{id:"head2",$$slots:{default:[Y]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment),s=$(),n(r.$$.fragment),a=$(),n(o.$$.fragment)},l(t){l(e.$$.fragment,t),s=i(t),l(r.$$.fragment,t),a=i(t),l(o.$$.fragment,t)},m(t,n){d(e,t,n),g(t,s,n),d(r,t,n),g(t,a,n),d(o,t,n),c=!0},p(t,s){const r={};4096&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r);const a={};4096&s&&(a.$$scope={dirty:s,ctx:t}),o.$set(a)},i(t){c||(u(e.$$.fragment,t),u(r.$$.fragment,t),u(o.$$.fragment,t),c=!0)},o(t){h(e.$$.fragment,t),h(r.$$.fragment,t),h(o.$$.fragment,t),c=!1},d(t){w(e,t),t&&f(s),w(r,t),t&&f(a),w(o,t)}}}function tt(t){let e,s;return e=new b({props:{ariaLabelInput:"Radius Selection (km)",id:"slider",labelText:"Radius Selection (km)",max:30,min:.2,step:.2,stepMuliplier:4,value:5}}),e.$on("change",t[3]),{c(){n(e.$$.fragment)},l(t){l(e.$$.fragment,t)},m(t,r){d(e,t,r),s=!0},p:k,i(t){s||(u(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){w(e,t)}}}function et(t){let e,s,x,y,v,b,k,S,j;return x=new R({props:{drawing_tools:!0}}),b=new r({props:{$$slots:{default:[Z]},$$scope:{ctx:t}}}),S=new L({props:{$$slots:{default:[tt]},$$scope:{ctx:t}}}),{c(){e=a("main"),s=a("div"),n(x.$$.fragment),y=$(),v=a("header"),n(b.$$.fragment),k=$(),n(S.$$.fragment),this.h()},l(t){e=o(t,"MAIN",{class:!0});var r=c(e);s=o(r,"DIV",{id:!0,class:!0});var a=c(s);l(x.$$.fragment,a),a.forEach(f),y=i(r),v=o(r,"HEADER",{class:!0});var n=c(v);l(b.$$.fragment,n),k=i(n),l(S.$$.fragment,n),n.forEach(f),r.forEach(f),this.h()},h(){m(s,"id","map"),m(s,"class","svelte-1c2scpc"),m(v,"class","svelte-1c2scpc"),m(e,"class","w-screen min-h-screen flex flex-col svelte-1c2scpc")},m(t,r){g(t,e,r),p(e,s),d(x,s,null),p(e,y),p(e,v),d(b,v,null),p(v,k),d(S,v,null),j=!0},p(t,[e]){const s={};4096&e&&(s.$$scope={dirty:e,ctx:t}),b.$set(s);const r={};4097&e&&(r.$$scope={dirty:e,ctx:t}),S.$set(r)},i(t){j||(u(x.$$.fragment,t),u(b.$$.fragment,t),u(S.$$.fragment,t),j=!0)},o(t){h(x.$$.fragment,t),h(b.$$.fragment,t),h(S.$$.fragment,t),j=!1},d(t){t&&f(e),w(x),w(b),w(S)}}}function st(t,e,s){let r,a,n,$,o,c;x(t,N,(t=>s(4,r=t))),x(t,U,(t=>s(5,a=t))),x(t,z,(t=>s(6,n=t))),x(t,G,(t=>s(7,$=t))),x(t,O,(t=>s(8,o=t))),x(t,H,(t=>s(0,c=t)));let{width:l="100%"}=e,{height:f="100%"}=e;y((async function(){function t(){const t=$[$.length-1];console.warn("---recolour",...t.oa),o.setPaintProperty("bounds","fill-color",["match",["get","oa"],["literal",...t.oa],"orange","transparent"])}console.clear(),console.warn(undefined),console.log("---"+window.location.host.split(":")[0]+"---"),S(N,r={area:{type:"vector",tiles:["http://localhost:7113/{z}/{x}/{y}.pbf"]}},r),console.warn("mapsource",r),S(U,a=[{id:"bounds",source:"area","source-layer":"geodraw",type:"fill",paint:{"fill-color":"transparent","fill-opacity":.7,"fill-outline-color":"steelblue"}},{id:"centroids",source:"area","source-layer":"centroids",type:"circle",paint:{"circle-radius":.6,"circle-color":{property:"k",stops:[[0,"green"],[1,"red"]]},"circle-opacity":.8}}],a),"SpeechSynthesisUtterance"in window&&(new SpeechSynthesisUtterance,console.error('speech tools enabled - "context menu". Use two finger click on mac trackpad to trigger')),S(z,n=[{event:"contextmenu",layer:"bounds",callback:t=>{}}],n),o.on("load",(()=>{G.subscribe(t)}))}));return t.$$set=t=>{"width"in t&&s(1,l=t.width),"height"in t&&s(2,f=t.height)},[c,l,f,function(t){console.log("slider value",t.detail),S(H,c=t.detail,c)}]}export default class extends t{constructor(t){super(),e(this,t,st,et,s,{width:1,height:2})}}
