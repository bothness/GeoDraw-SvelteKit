import{S as U,i as Y,s as J,e as K,c as w,a as E,d as b,b as z,g as m,k as I,t as V,m as S,h as H,f as g,a8 as Q,G as k,j as N,a0 as T,l as W,E as A}from"../../chunks/index-319e1e25.js";function B(n,e,s){const t=n.slice();return t[13]=e[s],t}function L(n,e,s){const t=n.slice();return t[16]=e[s],t[18]=s,t}function M(n,e,s){const t=n.slice();return t[16]=e[s],t[18]=s,t}function O(n,e,s){const t=n.slice();return t[13]=e[s],t[18]=s,t}function P(n){let e,s=n[7],t=[];for(let a=0;a<s.length;a+=1)t[a]=j(O(n,s,a));return{c(){e=K("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"UL",{class:!0});var r=E(e);for(let l=0;l<t.length;l+=1)t[l].l(r);r.forEach(b),this.h()},h(){z(e,"class","legend-block svelte-1ri9pb8")},m(a,r){m(a,e,r);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(a,r){if(r&144){s=a[7];let l;for(l=0;l<s.length;l+=1){const h=O(a,s,l);t[l]?t[l].p(h,r):(t[l]=j(h),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},d(a){a&&b(e),T(t,a)}}}function j(n){let e,s,t,a,r=n[13]+"",l,h,o;return{c(){e=K("li"),s=K("div"),t=I(),a=K("span"),l=V(r),o=I(),this.h()},l(_){e=w(_,"LI",{class:!0});var c=E(e);s=w(c,"DIV",{class:!0}),E(s).forEach(b),t=S(c),a=w(c,"SPAN",{class:!0});var v=E(a);l=H(v,r),v.forEach(b),o=S(c),c.forEach(b),this.h()},h(){z(s,"class","legend-vis "+(n[18]==0?"bar":"marker")+" svelte-1ri9pb8"),g(s,"height","1rem",!1),g(s,"width",n[18]==0?"1rem":n[4]+"px",!1),z(a,"class",h=Q(n[18]==0?"bold":"brackets")+" svelte-1ri9pb8"),z(e,"class","svelte-1ri9pb8")},m(_,c){m(_,e,c),k(e,s),k(e,t),k(e,a),k(a,l),k(e,o)},p(_,c){c&16&&g(s,"width",_[18]==0?"1rem":_[4]+"px",!1),c&128&&r!==(r=_[13]+"")&&N(l,r)},d(_){_&&b(e)}}}function q(n){let e,s=n[1](n[6](n[16][n[0]]))+"",t,a,r;return{c(){e=K("span"),t=V(s),a=V(n[2]),this.h()},l(l){e=w(l,"SPAN",{class:!0});var h=E(e);t=H(h,s),a=H(h,n[2]),h.forEach(b),this.h()},h(){z(e,"class",r="label "+(n[18]==0?"bold":"sml brackets")+" svelte-1ri9pb8")},m(l,h){m(l,e,h),k(e,t),k(e,a)},p(l,h){h&99&&s!==(s=l[1](l[6](l[16][l[0]]))+"")&&N(t,s),h&4&&N(a,l[2])},d(l){l&&b(e)}}}function R(n){let e,s=`calc(${n[6](n[16][n[0]])}% - ${n[4]/2}px)`,t=`${n[4]}px`;return{c(){e=K("div"),this.h()},l(a){e=w(a,"DIV",{class:!0}),E(e).forEach(b),this.h()},h(){z(e,"class","marker svelte-1ri9pb8"),g(e,"left",s,!1),g(e,"border-left-width",t,!1)},m(a,r){m(a,e,r)},p(a,r){r&113&&s!==(s=`calc(${a[6](a[16][a[0]])}% - ${a[4]/2}px)`)&&g(e,"left",s,!1),r&16&&t!==(t=`${a[4]}px`)&&g(e,"border-left-width",t,!1)},d(a){a&&b(e)}}}function X(n){let e,s=`${n[6](n[16][n[0]])}%`;return{c(){e=K("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),E(e).forEach(b),this.h()},h(){z(e,"class","bar svelte-1ri9pb8"),g(e,"left","0",!1),g(e,"width",s,!1)},m(t,a){m(t,e,a)},p(t,a){a&97&&s!==(s=`${t[6](t[16][t[0]])}%`)&&g(e,"width",s,!1)},d(t){t&&b(e)}}}function F(n){let e;function s(r,l){return r[18]==0?X:R}let a=s(n)(n);return{c(){a.c(),e=W()},l(r){a.l(r),e=W()},m(r,l){a.m(r,l),m(r,e,l)},p(r,l){a.p(r,l)},d(r){a.d(r),r&&b(e)}}}function G(n){let e,s=n[13].label+"",t,a,r,l,h,o=`${n[3]}px`,_=n[13].values,c=[];for(let f=0;f<_.length;f+=1)c[f]=q(M(n,_,f));let v=n[13].values,d=[];for(let f=0;f<v.length;f+=1)d[f]=F(L(n,v,f));return{c(){e=K("div"),t=V(s),a=I();for(let f=0;f<c.length;f+=1)c[f].c();r=I(),l=K("div");for(let f=0;f<d.length;f+=1)d[f].c();h=I(),this.h()},l(f){e=w(f,"DIV",{class:!0});var p=E(e);t=H(p,s),a=S(p);for(let u=0;u<c.length;u+=1)c[u].l(p);p.forEach(b),r=S(f),l=w(f,"DIV",{class:!0});var i=E(l);for(let u=0;u<d.length;u+=1)d[u].l(i);h=S(i),i.forEach(b),this.h()},h(){z(e,"class","label-group svelte-1ri9pb8"),z(l,"class","bar-group svelte-1ri9pb8"),g(l,"height",o,!1)},m(f,p){m(f,e,p),k(e,t),k(e,a);for(let i=0;i<c.length;i+=1)c[i].m(e,null);m(f,r,p),m(f,l,p);for(let i=0;i<d.length;i+=1)d[i].m(l,null);k(l,h)},p(f,p){if(p&32&&s!==(s=f[13].label+"")&&N(t,s),p&103){_=f[13].values;let i;for(i=0;i<_.length;i+=1){const u=M(f,_,i);c[i]?c[i].p(u,p):(c[i]=q(u),c[i].c(),c[i].m(e,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=_.length}if(p&113){v=f[13].values;let i;for(i=0;i<v.length;i+=1){const u=L(f,v,i);d[i]?d[i].p(u,p):(d[i]=F(u),d[i].c(),d[i].m(l,h))}for(;i<d.length;i+=1)d[i].d(1);d.length=v.length}p&8&&o!==(o=`${f[3]}px`)&&g(l,"height",o,!1)},d(f){f&&b(e),T(c,f),f&&b(r),f&&b(l),T(d,f)}}}function Z(n){let e,s,t=n[7][1]&&P(n),a=n[5],r=[];for(let l=0;l<a.length;l+=1)r[l]=G(B(n,a,l));return{c(){t&&t.c(),e=I();for(let l=0;l<r.length;l+=1)r[l].c();s=W()},l(l){t&&t.l(l),e=S(l);for(let h=0;h<r.length;h+=1)r[h].l(l);s=W()},m(l,h){t&&t.m(l,h),m(l,e,h);for(let o=0;o<r.length;o+=1)r[o].m(l,h);m(l,s,h)},p(l,[h]){if(l[7][1]?t?t.p(l,h):(t=P(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),h&127){a=l[5];let o;for(o=0;o<a.length;o+=1){const _=B(l,a,o);r[o]?r[o].p(_,h):(r[o]=G(_),r[o].c(),r[o].m(s.parentNode,s))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},i:A,o:A,d(l){t&&t.d(l),l&&b(e),T(r,l),l&&b(s)}}}function x(n,e,s){let t,a,r,{data:l}=e,{xKey:h="value"}=e,{yKey:o="category"}=e,{zKey:_="group"}=e,{formatTick:c=i=>i>1?Math.ceil(i):(Math.ceil(i*100)/100).toFixed(2)}=e,{suffix:v="%"}=e,{barHeight:d=25}=e,{markerWidth:f=3}=e;function p(i,u){let y={};for(const D of i)y[D[u]]||(y[D[u]]={label:D[u],values:[]}),y[D[u]].values.push(D);let C=[];for(const D in y)C.push(y[D]);return C}return n.$$set=i=>{"data"in i&&s(8,l=i.data),"xKey"in i&&s(0,h=i.xKey),"yKey"in i&&s(9,o=i.yKey),"zKey"in i&&s(10,_=i.zKey),"formatTick"in i&&s(1,c=i.formatTick),"suffix"in i&&s(2,v=i.suffix),"barHeight"in i&&s(3,d=i.barHeight),"markerWidth"in i&&s(4,f=i.markerWidth)},n.$$.update=()=>{n.$$.dirty&768&&l.map(i=>i[o]).filter((i,u,y)=>y.indexOf(i)===u),n.$$.dirty&1280&&s(7,t=l.map(i=>i[_]).filter((i,u,y)=>y.indexOf(i)===u)),n.$$.dirty&768&&s(5,r=p(l,o))},s(6,a=i=>i*100),[h,c,v,d,f,r,a,t,l,o,_]}class ee extends U{constructor(e){super(),Y(this,e,x,Z,J,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,markerWidth:4})}}export{ee as default};
