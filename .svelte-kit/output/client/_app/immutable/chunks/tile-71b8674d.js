function j(){return new _n}function _n(){this.reset()}_n.prototype={constructor:_n,reset:function(){this.s=this.t=0},add:function(n){jn(yn,n,this.t),jn(this,yn.s,this.s),this.s?this.t+=yn.t:this.s=yn.t},valueOf:function(){return this.s}};var yn=new _n;function jn(n,t,e){var i=n.s=t+e,o=i-t,l=i-o;n.t=t-l+(e-o)}var m=1e-6,I=Math.PI,H=I/2,bn=I/4,K=I*2,B=180/I,D=I/180,q=Math.abs,St=Math.atan,gn=Math.atan2,C=Math.cos,qt=Math.exp,Xt=Math.log,F=Math.sin,tn=Math.sqrt,Yt=Math.tan;function Ot(n){return n>1?0:n<-1?I:Math.acos(n)}function vn(n){return n>1?H:n<-1?-H:Math.asin(n)}function J(){}function zn(n,t){n&&tt.hasOwnProperty(n.type)&&tt[n.type](n,t)}var nt={Feature:function(n,t){zn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,o=e.length;++i<o;)zn(e[i].geometry,t)}},tt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){qn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)qn(e[i],t,0)},Polygon:function(n,t){it(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)it(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,o=e.length;++i<o;)zn(e[i],t)}};function qn(n,t,e){var i=-1,o=n.length-e,l;for(t.lineStart();++i<o;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function it(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)qn(n[e],t,1);t.polygonEnd()}function rn(n,t){n&&nt.hasOwnProperty(n.type)?nt[n.type](n,t):zn(n,t)}j();j();function Xn(n){return[gn(n[1],n[0]),vn(n[2])]}function un(n){var t=n[0],e=n[1],i=C(e);return[i*C(t),i*F(t),F(e)]}function Mn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function In(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function An(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function wn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Yn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}j();function Et(n,t){function e(i,o){return i=n(i,o),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,o){return i=t.invert(i,o),i&&n.invert(i[0],i[1])}),e}function On(n,t){return[n>I?n-K:n<-I?n+K:n,t]}On.invert=On;function dt(n,t,e){return(n%=K)?t||e?Et(rt(n),ot(t,e)):rt(n):t||e?ot(t,e):On}function et(n){return function(t,e){return t+=n,[t>I?t-K:t<-I?t+K:t,e]}}function rt(n){var t=et(n);return t.invert=et(-n),t}function ot(n,t){var e=C(n),i=F(n),o=C(t),l=F(t);function f(h,S){var p=C(S),r=C(h)*p,u=F(h)*p,c=F(S),s=c*e+r*i;return[gn(u*o-s*l,r*e-c*i),vn(s*o+u*l)]}return f.invert=function(h,S){var p=C(S),r=C(h)*p,u=F(h)*p,c=F(S),s=c*o-u*l;return[gn(u*o+c*l,r*e+s*i),vn(s*e-r*i)]},f}function Zt(n){n=dt(n[0]*D,n[1]*D,n.length>2?n[2]*D:0);function t(e){return e=n(e[0]*D,e[1]*D),e[0]*=B,e[1]*=B,e}return t.invert=function(e){return e=n.invert(e[0]*D,e[1]*D),e[0]*=B,e[1]*=B,e},t}function Bt(n,t,e,i,o,l){if(!!e){var f=C(t),h=F(t),S=i*e;o==null?(o=t+i*K,l=t-S/2):(o=ut(f,o),l=ut(f,l),(i>0?o<l:o>l)&&(o+=i*K));for(var p,r=o;i>0?r>l:r<l;r-=S)p=Xn([f,-h*C(r),-h*F(r)]),n.point(p[0],p[1])}}function ut(n,t){t=un(t),t[0]-=n,Yn(t);var e=Ot(-t[1]);return((-t[2]<0?-e:e)+K-m)%K}function yt(){var n=[],t;return{point:function(e,i){t.push([e,i])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Gt(n,t,e,i,o,l){var f=n[0],h=n[1],S=t[0],p=t[1],r=0,u=1,c=S-f,s=p-h,a;if(a=e-f,!(!c&&a>0)){if(a/=c,c<0){if(a<r)return;a<u&&(u=a)}else if(c>0){if(a>u)return;a>r&&(r=a)}if(a=o-f,!(!c&&a<0)){if(a/=c,c<0){if(a>u)return;a>r&&(r=a)}else if(c>0){if(a<r)return;a<u&&(u=a)}if(a=i-h,!(!s&&a>0)){if(a/=s,s<0){if(a<r)return;a<u&&(u=a)}else if(s>0){if(a>u)return;a>r&&(r=a)}if(a=l-h,!(!s&&a<0)){if(a/=s,s<0){if(a>u)return;a>r&&(r=a)}else if(s>0){if(a<r)return;a<u&&(u=a)}return r>0&&(n[0]=f+r*c,n[1]=h+r*s),u<1&&(t[0]=f+u*c,t[1]=h+u*s),!0}}}}}function Rn(n,t){return q(n[0]-t[0])<m&&q(n[1]-t[1])<m}function Pn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Mt(n,t,e,i,o){var l=[],f=[],h,S;if(n.forEach(function(a){if(!((w=a.length-1)<=0)){var w,d=a[0],_=a[w],E;if(Rn(d,_)){for(o.lineStart(),h=0;h<w;++h)o.point((d=a[h])[0],d[1]);o.lineEnd();return}l.push(E=new Pn(d,a,null,!0)),f.push(E.o=new Pn(d,null,E,!1)),l.push(E=new Pn(_,a,null,!1)),f.push(E.o=new Pn(_,null,E,!0))}}),!!l.length){for(f.sort(t),lt(l),lt(f),h=0,S=f.length;h<S;++h)f[h].e=e=!e;for(var p=l[0],r,u;;){for(var c=p,s=!0;c.v;)if((c=c.n)===p)return;r=c.z,o.lineStart();do{if(c.v=c.o.v=!0,c.e){if(s)for(h=0,S=r.length;h<S;++h)o.point((u=r[h])[0],u[1]);else i(c.x,c.n.x,1,o);c=c.n}else{if(s)for(r=c.p.z,h=r.length-1;h>=0;--h)o.point((u=r[h])[0],u[1]);else i(c.x,c.p.x,-1,o);c=c.p}c=c.o,r=c.z,s=!s}while(!c.v);o.lineEnd()}}}function lt(n){if(!!(t=n.length)){for(var t,e=0,i=n[0],o;++e<t;)i.n=o=n[e],o.p=i,i=o;i.n=o=n[0],o.p=i}}function wt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Ht(n){return n.length===1&&(n=Jt(n)),{left:function(t,e,i,o){for(i==null&&(i=0),o==null&&(o=t.length);i<o;){var l=i+o>>>1;n(t[l],e)<0?i=l+1:o=l}return i},right:function(t,e,i,o){for(i==null&&(i=0),o==null&&(o=t.length);i<o;){var l=i+o>>>1;n(t[l],e)>0?o=l:i=l+1}return i}}}function Jt(n){return function(t,e){return wt(n(t),e)}}Ht(wt);function Pt(n){for(var t=n.length,e,i=-1,o=0,l,f;++i<t;)o+=n[i].length;for(l=new Array(o);--t>=0;)for(f=n[t],e=f.length;--e>=0;)l[--o]=f[e];return l}var cn=1e9,Nn=-cn;function Kt(n,t,e,i){function o(p,r){return n<=p&&p<=e&&t<=r&&r<=i}function l(p,r,u,c){var s=0,a=0;if(p==null||(s=f(p,u))!==(a=f(r,u))||S(p,r)<0^u>0)do c.point(s===0||s===3?n:e,s>1?i:t);while((s=(s+u+4)%4)!==a);else c.point(r[0],r[1])}function f(p,r){return q(p[0]-n)<m?r>0?0:3:q(p[0]-e)<m?r>0?2:1:q(p[1]-t)<m?r>0?1:0:r>0?3:2}function h(p,r){return S(p.x,r.x)}function S(p,r){var u=f(p,1),c=f(r,1);return u!==c?u-c:u===0?r[1]-p[1]:u===1?p[0]-r[0]:u===2?p[1]-r[1]:r[0]-p[0]}return function(p){var r=p,u=yt(),c,s,a,w,d,_,E,N,R,x,v,y={point:M,lineStart:A,lineEnd:Y,polygonStart:T,polygonEnd:L};function M(z,$){o(z,$)&&r.point(z,$)}function P(){for(var z=0,$=0,X=s.length;$<X;++$)for(var O=s[$],Z=1,fn=O.length,V=O[0],b,W,dn=V[0],en=V[1];Z<fn;++Z)b=dn,W=en,V=O[Z],dn=V[0],en=V[1],W<=i?en>i&&(dn-b)*(i-W)>(en-W)*(n-b)&&++z:en<=i&&(dn-b)*(i-W)<(en-W)*(n-b)&&--z;return z}function T(){r=u,c=[],s=[],v=!0}function L(){var z=P(),$=v&&z,X=(c=Pt(c)).length;($||X)&&(p.polygonStart(),$&&(p.lineStart(),l(null,null,1,p),p.lineEnd()),X&&Mt(c,h,z,l,p),p.polygonEnd()),r=p,c=s=a=null}function A(){y.point=g,s&&s.push(a=[]),x=!0,R=!1,E=N=NaN}function Y(){c&&(g(w,d),_&&R&&u.rejoin(),c.push(u.result())),y.point=M,R&&r.lineEnd()}function g(z,$){var X=o(z,$);if(s&&a.push([z,$]),x)w=z,d=$,_=X,x=!1,X&&(r.lineStart(),r.point(z,$));else if(X&&R)r.point(z,$);else{var O=[E=Math.max(Nn,Math.min(cn,E)),N=Math.max(Nn,Math.min(cn,N))],Z=[z=Math.max(Nn,Math.min(cn,z)),$=Math.max(Nn,Math.min(cn,$))];Gt(O,Z,n,t,e,i)?(R||(r.lineStart(),r.point(O[0],O[1])),r.point(Z[0],Z[1]),X||r.lineEnd(),v=!1):X&&(r.lineStart(),r.point(z,$),v=!1)}E=z,N=$,R=X}return y}}var Cn=j();function Qt(n,t){var e=t[0],i=t[1],o=[F(e),-C(e),0],l=0,f=0;Cn.reset();for(var h=0,S=n.length;h<S;++h)if(!!(r=(p=n[h]).length))for(var p,r,u=p[r-1],c=u[0],s=u[1]/2+bn,a=F(s),w=C(s),d=0;d<r;++d,c=E,a=R,w=x,u=_){var _=p[d],E=_[0],N=_[1]/2+bn,R=F(N),x=C(N),v=E-c,y=v>=0?1:-1,M=y*v,P=M>I,T=a*R;if(Cn.add(gn(T*y*F(M),w*x+T*C(M))),l+=P?v+y*K:v,P^c>=e^E>=e){var L=In(un(u),un(_));Yn(L);var A=In(o,L);Yn(A);var Y=(P^v>=0?-1:1)*vn(A[2]);(i>Y||i===Y&&(L[0]||L[1]))&&(f+=P^v>=0?1:-1)}}return(l<-m||l<m&&Cn<-m)^f&1}j();function Zn(n){return n}var Dn=j(),Bn=j(),Nt,Rt,Gn,Hn,k={point:J,lineStart:J,lineEnd:J,polygonStart:function(){k.lineStart=Ut,k.lineEnd=Wt},polygonEnd:function(){k.lineStart=k.lineEnd=k.point=J,Dn.add(q(Bn)),Bn.reset()},result:function(){var n=Dn/2;return Dn.reset(),n}};function Ut(){k.point=Vt}function Vt(n,t){k.point=_t,Nt=Gn=n,Rt=Hn=t}function _t(n,t){Bn.add(Hn*n-Gn*t),Gn=n,Hn=t}function Wt(){_t(Nt,Rt)}var ln=1/0,xn=ln,Sn=-ln,mn=Sn,Ln={point:kt,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[ln,xn],[Sn,mn]];return Sn=mn=-(xn=ln=1/0),n}};function kt(n,t){n<ln&&(ln=n),n>Sn&&(Sn=n),t<xn&&(xn=t),t>mn&&(mn=t)}var Jn=0,Kn=0,an=0,$n=0,Tn=0,on=0,Qn=0,Un=0,sn=0,zt,It,Q,U,G={point:nn,lineStart:ft,lineEnd:ct,polygonStart:function(){G.lineStart=ni,G.lineEnd=ti},polygonEnd:function(){G.point=nn,G.lineStart=ft,G.lineEnd=ct},result:function(){var n=sn?[Qn/sn,Un/sn]:on?[$n/on,Tn/on]:an?[Jn/an,Kn/an]:[NaN,NaN];return Jn=Kn=an=$n=Tn=on=Qn=Un=sn=0,n}};function nn(n,t){Jn+=n,Kn+=t,++an}function ft(){G.point=jt}function jt(n,t){G.point=bt,nn(Q=n,U=t)}function bt(n,t){var e=n-Q,i=t-U,o=tn(e*e+i*i);$n+=o*(Q+n)/2,Tn+=o*(U+t)/2,on+=o,nn(Q=n,U=t)}function ct(){G.point=nn}function ni(){G.point=ii}function ti(){xt(zt,It)}function ii(n,t){G.point=xt,nn(zt=Q=n,It=U=t)}function xt(n,t){var e=n-Q,i=t-U,o=tn(e*e+i*i);$n+=o*(Q+n)/2,Tn+=o*(U+t)/2,on+=o,o=U*n-Q*t,Qn+=o*(Q+n),Un+=o*(U+t),sn+=o*3,nn(Q=n,U=t)}function mt(n){this._context=n}mt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,K);break}}},result:J};var Vn=j(),Fn,Lt,$t,pn,hn,En={point:J,lineStart:function(){En.point=ei},lineEnd:function(){Fn&&Tt(Lt,$t),En.point=J},polygonStart:function(){Fn=!0},polygonEnd:function(){Fn=null},result:function(){var n=+Vn;return Vn.reset(),n}};function ei(n,t){En.point=Tt,Lt=pn=n,$t=hn=t}function Tt(n,t){pn-=n,hn-=t,Vn.add(tn(pn*pn+hn*hn)),pn=n,hn=t}function At(){this._string=[]}At.prototype={_radius:4.5,_circle:at(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=at(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function at(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Mi(n,t){var e=4.5,i,o;function l(f){return f&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),rn(f,i(o))),o.result()}return l.area=function(f){return rn(f,i(k)),k.result()},l.measure=function(f){return rn(f,i(En)),En.result()},l.bounds=function(f){return rn(f,i(Ln)),Ln.result()},l.centroid=function(f){return rn(f,i(G)),G.result()},l.projection=function(f){return arguments.length?(i=f==null?(n=null,Zn):(n=f).stream,l):n},l.context=function(f){return arguments.length?(o=f==null?(t=null,new At):new mt(t=f),typeof e!="function"&&o.pointRadius(e),l):t},l.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(o.pointRadius(+f),+f),l):e},l.projection(n).context(t)}function Ct(n,t,e,i){return function(o,l){var f=t(l),h=o.invert(i[0],i[1]),S=yt(),p=t(S),r=!1,u,c,s,a={point:w,lineStart:_,lineEnd:E,polygonStart:function(){a.point=N,a.lineStart=R,a.lineEnd=x,c=[],u=[]},polygonEnd:function(){a.point=w,a.lineStart=_,a.lineEnd=E,c=Pt(c);var v=Qt(u,h);c.length?(r||(l.polygonStart(),r=!0),Mt(c,oi,v,e,l)):v&&(r||(l.polygonStart(),r=!0),l.lineStart(),e(null,null,1,l),l.lineEnd()),r&&(l.polygonEnd(),r=!1),c=u=null},sphere:function(){l.polygonStart(),l.lineStart(),e(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function w(v,y){var M=o(v,y);n(v=M[0],y=M[1])&&l.point(v,y)}function d(v,y){var M=o(v,y);f.point(M[0],M[1])}function _(){a.point=d,f.lineStart()}function E(){a.point=w,f.lineEnd()}function N(v,y){s.push([v,y]);var M=o(v,y);p.point(M[0],M[1])}function R(){p.lineStart(),s=[]}function x(){N(s[0][0],s[0][1]),p.lineEnd();var v=p.clean(),y=S.result(),M,P=y.length,T,L,A;if(s.pop(),u.push(s),s=null,!!P){if(v&1){if(L=y[0],(T=L.length-1)>0){for(r||(l.polygonStart(),r=!0),l.lineStart(),M=0;M<T;++M)l.point((A=L[M])[0],A[1]);l.lineEnd()}return}P>1&&v&2&&y.push(y.pop().concat(y.shift())),c.push(y.filter(ri))}}return a}}function ri(n){return n.length>1}function oi(n,t){return((n=n.x)[0]<0?n[1]-H-m:H-n[1])-((t=t.x)[0]<0?t[1]-H-m:H-t[1])}var st=Ct(function(){return!0},ui,fi,[-I,-H]);function ui(n){var t=NaN,e=NaN,i=NaN,o;return{lineStart:function(){n.lineStart(),o=1},point:function(l,f){var h=l>0?I:-I,S=q(l-t);q(S-I)<m?(n.point(t,e=(e+f)/2>0?H:-H),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(h,e),n.point(l,e),o=0):i!==h&&S>=I&&(q(t-i)<m&&(t-=i*m),q(l-h)<m&&(l-=h*m),e=li(t,e,l,f),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(h,e),o=0),n.point(t=l,e=f),i=h},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-o}}}function li(n,t,e,i){var o,l,f=F(n-e);return q(f)>m?St((F(t)*(l=C(i))*F(e)-F(i)*(o=C(t))*F(n))/(o*l*f)):(t+i)/2}function fi(n,t,e,i){var o;if(n==null)o=e*H,i.point(-I,o),i.point(0,o),i.point(I,o),i.point(I,0),i.point(I,-o),i.point(0,-o),i.point(-I,-o),i.point(-I,0),i.point(-I,o);else if(q(n[0]-t[0])>m){var l=n[0]<t[0]?I:-I;o=e*l/2,i.point(-l,o),i.point(0,o),i.point(l,o)}else i.point(t[0],t[1])}function ci(n,t){var e=C(n),i=e>0,o=q(e)>m;function l(r,u,c,s){Bt(s,n,t,c,r,u)}function f(r,u){return C(r)*C(u)>e}function h(r){var u,c,s,a,w;return{lineStart:function(){a=s=!1,w=1},point:function(d,_){var E=[d,_],N,R=f(d,_),x=i?R?0:p(d,_):R?p(d+(d<0?I:-I),_):0;if(!u&&(a=s=R)&&r.lineStart(),R!==s&&(N=S(u,E),(!N||Rn(u,N)||Rn(E,N))&&(E[0]+=m,E[1]+=m,R=f(E[0],E[1]))),R!==s)w=0,R?(r.lineStart(),N=S(E,u),r.point(N[0],N[1])):(N=S(u,E),r.point(N[0],N[1]),r.lineEnd()),u=N;else if(o&&u&&i^R){var v;!(x&c)&&(v=S(E,u,!0))&&(w=0,i?(r.lineStart(),r.point(v[0][0],v[0][1]),r.point(v[1][0],v[1][1]),r.lineEnd()):(r.point(v[1][0],v[1][1]),r.lineEnd(),r.lineStart(),r.point(v[0][0],v[0][1])))}R&&(!u||!Rn(u,E))&&r.point(E[0],E[1]),u=E,s=R,c=x},lineEnd:function(){s&&r.lineEnd(),u=null},clean:function(){return w|(a&&s)<<1}}}function S(r,u,c){var s=un(r),a=un(u),w=[1,0,0],d=In(s,a),_=Mn(d,d),E=d[0],N=_-E*E;if(!N)return!c&&r;var R=e*_/N,x=-e*E/N,v=In(w,d),y=wn(w,R),M=wn(d,x);An(y,M);var P=v,T=Mn(y,P),L=Mn(P,P),A=T*T-L*(Mn(y,y)-1);if(!(A<0)){var Y=tn(A),g=wn(P,(-T-Y)/L);if(An(g,y),g=Xn(g),!c)return g;var z=r[0],$=u[0],X=r[1],O=u[1],Z;$<z&&(Z=z,z=$,$=Z);var fn=$-z,V=q(fn-I)<m,b=V||fn<m;if(!V&&O<X&&(Z=X,X=O,O=Z),b?V?X+O>0^g[1]<(q(g[0]-z)<m?X:O):X<=g[1]&&g[1]<=O:fn>I^(z<=g[0]&&g[0]<=$)){var W=wn(P,(-T+Y)/L);return An(W,y),[g,Xn(W)]}}}function p(r,u){var c=i?n:I-n,s=0;return r<-c?s|=1:r>c&&(s|=2),u<-c?s|=4:u>c&&(s|=8),s}return Ct(f,h,l,i?[0,-n]:[-I,n-I])}function Dt(n){return function(t){var e=new Wn;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Wn(){}Wn.prototype={constructor:Wn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ft(n,t,e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],l=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),l!=null&&n.clipExtent(null),rn(e,n.stream(Ln));var f=Ln.result(),h=Math.min(i/(f[1][0]-f[0][0]),o/(f[1][1]-f[0][1])),S=+t[0][0]+(i-h*(f[1][0]+f[0][0]))/2,p=+t[0][1]+(o-h*(f[1][1]+f[0][1]))/2;return l!=null&&n.clipExtent(l),n.scale(h*150).translate([S,p])}function ai(n,t,e){return Ft(n,[[0,0],t],e)}var pt=16,si=C(30*D);function ht(n,t){return+t?hi(n,t):pi(n)}function pi(n){return Dt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function hi(n,t){function e(i,o,l,f,h,S,p,r,u,c,s,a,w,d){var _=p-i,E=r-o,N=_*_+E*E;if(N>4*t&&w--){var R=f+c,x=h+s,v=S+a,y=tn(R*R+x*x+v*v),M=vn(v/=y),P=q(q(v)-1)<m||q(l-u)<m?(l+u)/2:gn(x,R),T=n(P,M),L=T[0],A=T[1],Y=L-i,g=A-o,z=E*Y-_*g;(z*z/N>t||q((_*Y+E*g)/N-.5)>.3||f*c+h*s+S*a<si)&&(e(i,o,l,f,h,S,L,A,P,R/=y,x/=y,v,w,d),d.point(L,A),e(L,A,P,R,x,v,p,r,u,c,s,a,w,d))}}return function(i){var o,l,f,h,S,p,r,u,c,s,a,w,d={point:_,lineStart:E,lineEnd:R,polygonStart:function(){i.polygonStart(),d.lineStart=x},polygonEnd:function(){i.polygonEnd(),d.lineStart=E}};function _(M,P){M=n(M,P),i.point(M[0],M[1])}function E(){u=NaN,d.point=N,i.lineStart()}function N(M,P){var T=un([M,P]),L=n(M,P);e(u,c,r,s,a,w,u=L[0],c=L[1],r=M,s=T[0],a=T[1],w=T[2],pt,i),i.point(u,c)}function R(){d.point=_,i.lineEnd()}function x(){E(),d.point=v,d.lineEnd=y}function v(M,P){N(o=M,P),l=u,f=c,h=s,S=a,p=w,d.point=N}function y(){e(u,c,r,s,a,w,l,f,o,h,S,p,pt,i),d.lineEnd=R,R()}return d}}var gi=Dt({point:function(n,t){this.stream.point(n*D,t*D)}});function vi(n){return Si(function(){return n})()}function Si(n){var t,e=150,i=480,o=250,l,f,h=0,S=0,p=0,r=0,u=0,c,s,a=null,w=st,d=null,_,E,N,R=Zn,x=.5,v=ht(L,x),y,M;function P(g){return g=s(g[0]*D,g[1]*D),[g[0]*e+l,f-g[1]*e]}function T(g){return g=s.invert((g[0]-l)/e,(f-g[1])/e),g&&[g[0]*B,g[1]*B]}function L(g,z){return g=t(g,z),[g[0]*e+l,f-g[1]*e]}P.stream=function(g){return y&&M===g?y:y=gi(w(c,v(R(M=g))))},P.clipAngle=function(g){return arguments.length?(w=+g?ci(a=g*D,6*D):(a=null,st),Y()):a*B},P.clipExtent=function(g){return arguments.length?(R=g==null?(d=_=E=N=null,Zn):Kt(d=+g[0][0],_=+g[0][1],E=+g[1][0],N=+g[1][1]),Y()):d==null?null:[[d,_],[E,N]]},P.scale=function(g){return arguments.length?(e=+g,A()):e},P.translate=function(g){return arguments.length?(i=+g[0],o=+g[1],A()):[i,o]},P.center=function(g){return arguments.length?(h=g[0]%360*D,S=g[1]%360*D,A()):[h*B,S*B]},P.rotate=function(g){return arguments.length?(p=g[0]%360*D,r=g[1]%360*D,u=g.length>2?g[2]%360*D:0,A()):[p*B,r*B,u*B]},P.precision=function(g){return arguments.length?(v=ht(L,x=g*g),Y()):tn(x)},P.fitExtent=function(g,z){return Ft(P,g,z)},P.fitSize=function(g,z){return ai(P,g,z)};function A(){s=Et(c=dt(p,r,u),t);var g=t(h,S);return l=i-g[0]*e,f=o+g[1]*e,Y()}function Y(){return y=M=null,P}return function(){return t=n.apply(this,arguments),P.invert=t.invert&&T,A()}}function kn(n,t){return[n,Xt(Yt((H+t)/2))]}kn.invert=function(n,t){return[n,2*St(qt(t))-H]};function wi(){return Ei(kn).scale(961/K)}function Ei(n){var t=vi(n),e=t.center,i=t.scale,o=t.translate,l=t.clipExtent,f=null,h,S,p;t.scale=function(u){return arguments.length?(i(u),r()):i()},t.translate=function(u){return arguments.length?(o(u),r()):o()},t.center=function(u){return arguments.length?(e(u),r()):e()},t.clipExtent=function(u){return arguments.length?(u==null?f=h=S=p=null:(f=+u[0][0],h=+u[0][1],S=+u[1][0],p=+u[1][1]),r()):f==null?null:[[f,h],[S,p]]};function r(){var u=I*i(),c=t(Zt(t.rotate()).invert([0,0]));return l(f==null?[[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]]:n===kn?[[Math.max(c[0]-u,f),h],[Math.min(c[0]+u,S),p]]:[[f,Math.max(c[1]-u,h)],[S,Math.min(c[1]+u,p)]])}return r()}function gt(n,t){return[n,t]}gt.invert=gt;function di(n){return n.k}function yi(n){return[n.x,n.y]}function vt(n){return function(){return n}}function Pi(){let n=0,t=0,e=960,i=500,o=!0,l=!0,f=256,h=di,S=yi,p=0;function r(){const u=+h.apply(this,arguments),c=S.apply(this,arguments),s=Math.log2(u/f),a=Math.round(Math.max(s+p,0)),w=Math.pow(2,s-a)*f,d=+c[0]-u/2,_=+c[1]-u/2,E=Math.max(o?0:-1/0,Math.floor((n-d)/w)),N=Math.min(o?1<<a:1/0,Math.ceil((e-d)/w)),R=Math.max(l?0:-1/0,Math.floor((t-_)/w)),x=Math.min(l?1<<a:1/0,Math.ceil((i-_)/w)),v=[];for(let y=R;y<x;++y)for(let M=E;M<N;++M)v.push([M,y,a]);return v.translate=[d/w,_/w],v.scale=w,v}return r.size=function(u){return arguments.length?(n=t=0,e=+u[0],i=+u[1],r):[e-n,i-t]},r.extent=function(u){return arguments.length?(n=+u[0][0],t=+u[0][1],e=+u[1][0],i=+u[1][1],r):[[n,t],[e,i]]},r.scale=function(u){return arguments.length?(h=typeof u=="function"?u:vt(+u),r):h},r.translate=function(u){return arguments.length?(S=typeof u=="function"?u:vt([+u[0],+u[1]]),r):S},r.zoomDelta=function(u){return arguments.length?(p=+u,r):p},r.tileSize=function(u){return arguments.length?(f=+u,r):f},r.clamp=function(u){return arguments.length?(o=l=!!u,r):o&&l},r.clampX=function(u){return arguments.length?(o=!!u,r):o},r.clampY=function(u){return arguments.length?(l=!!u,r):l},r}export{wi as a,Mi as g,Pi as t};
