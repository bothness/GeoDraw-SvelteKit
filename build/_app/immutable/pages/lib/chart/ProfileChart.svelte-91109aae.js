import{S as T,i as X,s as Z,l as z,g as k,e as w,k as S,t as P,c as K,a as D,d as _,m as W,h as L,b as E,f as c,a8 as x,G as I,j as O,a0 as C,E as j}from"../../../chunks/index-319e1e25.js";function A(n,t,a){const l=n.slice();return l[14]=t[a],l[16]=a,l}function G(n,t,a){const l=n.slice();return l[17]=t[a],l[19]=a,l}function U(n,t,a){const l=n.slice();return l[17]=t[a],l[19]=a,l}function B(n,t,a){const l=n.slice();return l[21]=t[a],l[16]=a,l}function F(n){let t,a=n[6],l=[];for(let s=0;s<a.length;s+=1)l[s]=H(B(n,a,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=z()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);t=z()},m(s,f){for(let e=0;e<l.length;e+=1)l[e].m(s,f);k(s,t,f)},p(s,f){if(f&68){a=s[6];let e;for(e=0;e<a.length;e+=1){const o=B(s,a,e);l[e]?l[e].p(o,f):(l[e]=H(o),l[e].c(),l[e].m(t.parentNode,t))}for(;e<l.length;e+=1)l[e].d(1);l.length=a.length}},d(s){C(l,s),s&&_(t)}}}function H(n){let t,a,l=`${n[16]==0?0:n[2]}px`,s,f,e=n[21]+"",o,g,b;return{c(){t=w("li"),a=w("div"),s=S(),f=w("span"),o=P(e),b=S(),this.h()},l(m){t=K(m,"LI",{class:!0});var v=D(t);a=K(v,"DIV",{class:!0}),D(a).forEach(_),s=W(v),f=K(v,"SPAN",{class:!0});var p=D(f);o=L(p,e),p.forEach(_),b=W(v),v.forEach(_),this.h()},h(){E(a,"class","legend-vis "+(n[16]==0?"bar":"marker-vis")+" svelte-vf344q"),c(a,"border-bottom-width",l,!1),E(f,"class",g=x(n[16]==0?"bold":"brackets")+" svelte-vf344q"),E(t,"class","svelte-vf344q")},m(m,v){k(m,t,v),I(t,a),I(t,s),I(t,f),I(f,o),I(t,b)},p(m,v){v&4&&l!==(l=`${m[16]==0?0:m[2]}px`)&&c(a,"border-bottom-width",l,!1),v&64&&e!==(e=m[21]+"")&&O(o,e)},d(m){m&&_(t)}}}function $(n){let t,a=n[14].values,l=[];for(let s=0;s<a.length;s+=1)l[s]=J(G(n,a,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=z()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);t=z()},m(s,f){for(let e=0;e<l.length;e+=1)l[e].m(s,f);k(s,t,f)},p(s,f){if(f&181){a=s[14].values;let e;for(e=0;e<a.length;e+=1){const o=G(s,a,e);l[e]?l[e].p(o,f):(l[e]=J(o),l[e].c(),l[e].m(t.parentNode,t))}for(;e<l.length;e+=1)l[e].d(1);l.length=a.length}},d(s){C(l,s),s&&_(t)}}}function ee(n){let t,a=n[14].values,l=[];for(let s=0;s<a.length;s+=1)l[s]=Q(U(n,a,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=z()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);t=z()},m(s,f){for(let e=0;e<l.length;e+=1)l[e].m(s,f);k(s,t,f)},p(s,f){if(f&177){a=s[14].values;let e;for(e=0;e<a.length;e+=1){const o=U(s,a,e);l[e]?l[e].p(o,f):(l[e]=Q(o),l[e].c(),l[e].m(t.parentNode,t))}for(;e<l.length;e+=1)l[e].d(1);l.length=a.length}},d(s){C(l,s),s&&_(t)}}}function J(n){let t,a=`calc(${n[5](n[17][n[0]])}% - ${n[2]/2}px)`,l=`${n[19]/n[7].length*100}%`,s=`${1/n[7].length*100}%`,f=`${n[2]}px`;return{c(){t=w("div"),this.h()},l(e){t=K(e,"DIV",{class:!0}),D(t).forEach(_),this.h()},h(){E(t,"class","marker svelte-vf344q"),c(t,"bottom",a,!1),c(t,"height","0px",!1),c(t,"left",l,!1),c(t,"width",s,!1),c(t,"border-bottom-width",f,!1)},m(e,o){k(e,t,o)},p(e,o){o&53&&a!==(a=`calc(${e[5](e[17][e[0]])}% - ${e[2]/2}px)`)&&c(t,"bottom",a,!1),o&128&&l!==(l=`${e[19]/e[7].length*100}%`)&&c(t,"left",l,!1),o&128&&s!==(s=`${1/e[7].length*100}%`)&&c(t,"width",s,!1),o&4&&f!==(f=`${e[2]}px`)&&c(t,"border-bottom-width",f,!1)},d(e){e&&_(t)}}}function Q(n){let t,a=`${100-n[5](n[17][n[0]])}%`,l=`${n[5](n[17][n[0]])}%`,s=`${n[19]/n[7].length*100}%`,f=`calc(${1/n[7].length*100}% + 0.2px)`;return{c(){t=w("div"),this.h()},l(e){t=K(e,"DIV",{class:!0}),D(t).forEach(_),this.h()},h(){E(t,"class","bar svelte-vf344q"),c(t,"top",a,!1),c(t,"height",l,!1),c(t,"left",s,!1),c(t,"width",f,!1)},m(e,o){k(e,t,o)},p(e,o){o&49&&a!==(a=`${100-e[5](e[17][e[0]])}%`)&&c(t,"top",a,!1),o&49&&l!==(l=`${e[5](e[17][e[0]])}%`)&&c(t,"height",l,!1),o&128&&s!==(s=`${e[19]/e[7].length*100}%`)&&c(t,"left",s,!1),o&128&&f!==(f=`calc(${1/e[7].length*100}% + 0.2px)`)&&c(t,"width",f,!1)},d(e){e&&_(t)}}}function R(n){let t;function a(f,e){return f[16]==0?ee:$}let s=a(n)(n);return{c(){s.c(),t=z()},l(f){s.l(f),t=z()},m(f,e){s.m(f,e),k(f,t,e)},p(f,e){s.p(f,e)},d(f){s.d(f),f&&_(t)}}}function le(n){let t,a,l,s=`${n[1]}px`,f,e,o,g=n[3][0]+"",b,m,v,p=n[3][1]+"",N,d=n[6][1]&&F(n),V=n[4],u=[];for(let i=0;i<V.length;i+=1)u[i]=R(A(n,V,i));return{c(){t=w("ul"),d&&d.c(),a=S(),l=w("div");for(let i=0;i<u.length;i+=1)u[i].c();f=S(),e=w("div"),o=w("div"),b=P(g),m=S(),v=w("div"),N=P(p),this.h()},l(i){t=K(i,"UL",{class:!0});var h=D(t);d&&d.l(h),h.forEach(_),a=W(i),l=K(i,"DIV",{class:!0});var r=D(l);for(let M=0;M<u.length;M+=1)u[M].l(r);r.forEach(_),f=W(i),e=K(i,"DIV",{class:!0});var q=D(e);o=K(q,"DIV",{class:!0});var y=D(o);b=L(y,g),y.forEach(_),m=W(q),v=K(q,"DIV",{class:!0});var Y=D(v);N=L(Y,p),Y.forEach(_),q.forEach(_),this.h()},h(){E(t,"class","legend-block svelte-vf344q"),E(l,"class","bar-group svelte-vf344q"),c(l,"height",s,!1),E(o,"class","svelte-vf344q"),c(o,"left",0,!1),E(v,"class","svelte-vf344q"),c(v,"right",0,!1),E(e,"class","x-scale svelte-vf344q"),c(e,"height","1rem",!1)},m(i,h){k(i,t,h),d&&d.m(t,null),k(i,a,h),k(i,l,h);for(let r=0;r<u.length;r+=1)u[r].m(l,null);k(i,f,h),k(i,e,h),I(e,o),I(o,b),I(e,m),I(e,v),I(v,N)},p(i,[h]){if(i[6][1]?d?d.p(i,h):(d=F(i),d.c(),d.m(t,null)):d&&(d.d(1),d=null),h&181){V=i[4];let r;for(r=0;r<V.length;r+=1){const q=A(i,V,r);u[r]?u[r].p(q,h):(u[r]=R(q),u[r].c(),u[r].m(l,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=V.length}h&2&&s!==(s=`${i[1]}px`)&&c(l,"height",s,!1),h&8&&g!==(g=i[3][0]+"")&&O(b,g),h&8&&p!==(p=i[3][1]+"")&&O(N,p)},i:j,o:j,d(i){i&&_(t),d&&d.d(),i&&_(a),i&&_(l),C(u,i),i&&_(f),i&&_(e)}}}function te(n,t,a){let l,s,f,e,o,{data:g}=t,{xKey:b="category"}=t,{yKey:m="value"}=t,{zKey:v="group"}=t,{height:p=65}=t,{markerWidth:N=2.5}=t,{minmax:d=["0 years","80 plus"]}=t,{format:V=i=>Math.round(i)}=t;function u(i,h){let r={};for(const y of i)r[y[h]]||(r[y[h]]={label:y[h],values:[]}),r[y[h]].values.push(y);let q=[];for(const y in r)q.push(r[y]);return q}return n.$$set=i=>{"data"in i&&a(8,g=i.data),"xKey"in i&&a(9,b=i.xKey),"yKey"in i&&a(0,m=i.yKey),"zKey"in i&&a(10,v=i.zKey),"height"in i&&a(1,p=i.height),"markerWidth"in i&&a(2,N=i.markerWidth),"minmax"in i&&a(3,d=i.minmax),"format"in i&&a(11,V=i.format)},n.$$.update=()=>{n.$$.dirty&768&&a(7,l=g.map(i=>i[b]).filter((i,h,r)=>r.indexOf(i)===h)),n.$$.dirty&257&&a(12,s=[0,Math.max(...g.map(i=>i[m]))]),n.$$.dirty&1280&&a(6,f=g.map(i=>i[v]).filter((i,h,r)=>r.indexOf(i)===h)),n.$$.dirty&4096&&a(5,e=i=>Math.abs(i/s[1])*100),n.$$.dirty&1280&&a(4,o=u(g,v))},[m,p,N,d,o,e,f,l,g,b,v,V,s]}class ae extends T{constructor(t){super(),X(this,t,te,le,Z,{data:8,xKey:9,yKey:0,zKey:10,height:1,markerWidth:2,minmax:3,format:11})}}export{ae as default};
